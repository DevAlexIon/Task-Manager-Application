image: node

cache:
  paths:
      - node_modules

stages:
- lint client
- lint server
- backend-e2e-test
- frontend-unit-test

EsLint client:
 stage: lint client
 script:
  - npm i
  - npm run client-lint
 rules:
  - changes:
    - packages/web-client/*
 stage: frontend-unit-test
 script:
  - npm i
  - npm run frontend-unit-test
 rules:
  - changes:
    - packages/web-client/*

EsLint server:
 stage: lint server
 script:
  - npm i
  - npm run server-lint
 rules:
  - changes:
    - packages/server-api/*
 stage: backend-e2e-test
 script:
  - npm i
  - npm run test:e2e
 rules:
  - changes:
    - packages/server-api/*

